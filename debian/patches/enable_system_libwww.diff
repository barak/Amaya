Index: amaya-9.4/Amaya/configure.in
===================================================================
--- amaya-9.4.orig/Amaya/configure.in	2006-04-01 12:56:40.829537343 +0100
+++ amaya-9.4/Amaya/configure.in	2006-04-01 12:56:40.879532090 +0100
@@ -1145,6 +1145,34 @@
 fi
 
 dnl
+dnl Use of system provided libWWW
+dnl
+AC_ARG_ENABLE(system-libwww,       [  --enable-system-libwww try the wxWidgets system library ])
+
+if test "$enable_system_libwww" = "yes" ; then
+  AC_PATH_PROG(LIBWWWCONFIG, [libwww-config])
+  if test -z "$LIBWWWCONFIG" ; then
+    enable_system_libwww="no"
+  fi
+fi
+
+if test "$enable_system_libwww" != "yes" ; then
+  LIBWWW="libwww"
+  LIBWWW_CFLAGS=""
+else
+  LIBWWW=""
+  LIBWWW_CFLAGS="`$LIBWWWCONFIG --cflags`"
+  LIBWWW_CXXFLAGS="`$LIBWWWCONFIG --cflags`"
+fi
+
+LIBWWW_LDFLAGS="`$LIBWWWCONFIG --libs`"
+
+AC_SUBST(LIBWWW)
+AC_SUBST(LIBWWW_CFLAGS)
+AC_SUBST(LIBWWW_CXXFLAGS)
+AC_SUBST(LIBWWW_LDFLAGS)
+
+dnl
 dnl WebDAV support enabled by default
 dnl
 AC_ARG_WITH(dav,            [  --with-dav              enable WebDAV support (experimental) ])
Index: amaya-9.4/Amaya/Options.in
===================================================================
--- amaya-9.4.orig/Amaya/Options.in	2006-04-01 12:56:40.652555940 +0100
+++ amaya-9.4/Amaya/Options.in	2006-04-01 12:56:40.881531880 +0100
@@ -85,7 +85,6 @@
 
 PRINTIFNOTGL=@PRINTIFNOTGL@
 
-LIBWWW=libwww
 
 
 
Index: amaya-9.4/Amaya/Makefile.in
===================================================================
--- amaya-9.4.orig/Amaya/Makefile.in	2006-04-01 12:56:40.774543122 +0100
+++ amaya-9.4/Amaya/Makefile.in	2006-04-01 12:56:40.894530514 +0100
@@ -11,7 +11,7 @@
 
 include Options
 
-LIBWWW	   = libwww
+LIBWWW	   = @LIBWWW@
 LIBRAPTOR  = libraptor
 REDLAND    = redland
 LIBJPEG	   = libjpeg
@@ -51,7 +51,7 @@
 	@(if test -d thotlib ; then cd thotlib ; \
 	  $(MAKE) CC="$(CC)" CFLAGS="$(CFLAGS)" CXX="$(CXX)" CXXFLAGS="$(CXXFLAGS)" all ; fi)
 
-amaya_prog: rebuild force bin/str
+amaya_prog: rebuild force bin/str $(LIBWWW)
 	@(if test -d amaya ; then cd amaya ; \
 	  $(MAKE) CC="$(CC)" CFLAGS="$(CFLAGS)" CXX="$(CXX)" CXXFLAGS="$(CXXFLAGS)" amaya ; fi)
 
Index: amaya-9.4/Amaya/amaya/Makefile.libwww
===================================================================
--- amaya-9.4.orig/Amaya/amaya/Makefile.libwww	2003-07-02 15:21:33.000000000 +0100
+++ amaya-9.4/Amaya/amaya/Makefile.libwww	2006-04-01 12:56:40.896530304 +0100
@@ -18,39 +18,8 @@
 
 AMAYA_LIBWWW_OPTION_LIBS=
 
-#MKP: added -lwwwdav
-AMAYA_LIBWWW_LIBS= \
-		-L../$(LIBWWW)/Library/src/.libs \
-			-lwwwapp \
-			-lwwwhttp \
-			$(LIBWWW_RDF_PARSER) \
-			-lwwwhtml \
-			-lwwwmime \
-			-lwwwcache \
-			-lwwwstream \
-			-lwwwfile \
-			-lwwwdir \
-			-lwwwtrans \
-			-lwwwcore \
-			-lwwwutils \
-			-lwwwzip \
-			-lwwwftp \
-			$(WWWDAV) \
-		-L../$(LIBWWW)/modules/md5/.libs \
-			-lmd5 \
-			../$(LIBWWW)/modules/expat/.libs/libexpat.a
-#		-L../$(LIBWWW)/modules/expat/.libs \
-#			-lexpat \
-
 AMAYA_LIBWWW_EXTRA_LIBS=
 
-AMAYA_LIBWWW_INCLUDES= -I../libwww \
-		-I$(THOTDIR)/../libwww/Library/src \
-		-I$(THOTDIR)../libwww/modules/md5 \
-		-I$(THOTDIR)/../libwww/modules/expat/lib
-
 # this dependency calls the ../Makefile rule that compiles libwww
-AMAYA_LIBWWW_SRC= $(LIBZ) amaya_comp_libwww
+AMAYA_LIBWWW_SRC= $(LIBZ)
 
-amaya_comp_libwww : force
-		@(cd .. ; $(MAKE) libwww)
Index: amaya-9.4/Amaya/amaya/Makefile.in
===================================================================
--- amaya-9.4.orig/Amaya/amaya/Makefile.in	2006-04-01 12:56:40.678553208 +0100
+++ amaya-9.4/Amaya/amaya/Makefile.in	2006-04-01 12:56:40.901529778 +0100
@@ -10,6 +10,9 @@
 LIBWWW_RDF_PARSER = @LIBWWW_RDF_PARSER@
 LIBZ = @LIBZ@
 
+AMAYA_LIBWWW_LIBS = @LIBWWW_LDFLAGS@
+AMAYA_LIBWWW_INCLUDES = @LIBWWW_CFLAGS@
+
 OBJDIRS = wxdialog
 
 include ../Options
